<% include ../../partials/header %>
  <div id="content">
    <div class="wrap">
      <video autoplay></video>
      <button>getUserMedia()</button>

      <pre>
      <code class="highlight">$(function() {
  /**
   * getUserMedia 성공
   * @param stream
   */
  function success(stream) {
    console.log('success', arguments);

    // 비디오 테그에 stream 바인딩
    document.querySelector('video').srcObject = stream;

    // do something...
  }

  /**
   * getUserMedia 실패
   * @param err
   */
  function error(err) {
    console.log('error', arguments);

    alert('카메라와 마이크를 허용해주세요');
  }

  /**
   * 미디어 호출
   */
  async function startMedia() {
    try {
      const stream = await navigator.mediaDevices.getUserMedia({
        audio: true,
        video: true,
      });
      success(stream);
    } catch (err) {
      error(err);
    }
  }

  /**
   * 버튼 이벤트 바인딩
   */
  $('button').click(startMedia);
});</code>
   	</pre>
    </div>
  </div>

  <script src="js/main.js"></script>
  <% include ../../partials/footer %>